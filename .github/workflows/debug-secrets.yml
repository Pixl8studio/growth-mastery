name: Debug Secrets

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    env:
      CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
      ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}

    steps:
      - name: Check if secrets are set
        run: |
          echo "Checking secrets availability..."

          if [ -z "$CLAUDE_CODE_OAUTH_TOKEN" ]; then
            echo "‚ùå CLAUDE_CODE_OAUTH_TOKEN is NOT set or empty"
          else
            echo "‚úÖ CLAUDE_CODE_OAUTH_TOKEN is set (length: ${#CLAUDE_CODE_OAUTH_TOKEN})"
          fi

          if [ -z "$ANTHROPIC_API_KEY" ]; then
            echo "‚ùå ANTHROPIC_API_KEY is NOT set or empty"
          else
            echo "‚úÖ ANTHROPIC_API_KEY is set (length: ${#ANTHROPIC_API_KEY})"
          fi

          # Check if at least one is set
          if [ -z "$CLAUDE_CODE_OAUTH_TOKEN" ] && [ -z "$ANTHROPIC_API_KEY" ]; then
            echo ""
            echo "üö® ERROR: Neither CLAUDE_CODE_OAUTH_TOKEN nor ANTHROPIC_API_KEY is set!"
            echo ""
            echo "Please add one of these secrets to your repository:"
            echo "  1. Go to Settings ‚Üí Secrets and variables ‚Üí Actions"
            echo "  2. Click 'New repository secret'"
            echo "  3. Add either CLAUDE_CODE_OAUTH_TOKEN or ANTHROPIC_API_KEY"
            exit 1
          fi

